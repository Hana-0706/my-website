<!DOCTYPE html>
<html lang="ja">
<head> 
 <meta charset="UTF-8" /> 
 <title>äººæ°—ãƒ©ãƒ³ã‚­ãƒ³ã‚°</title> 
 <link rel="stylesheet" href="code/rank.css" />
</head>
<body> 
  <main class="rank-page"> 
    <h1>äººæ°—ãƒ©ãƒ³ã‚­ãƒ³ã‚°</h1> 
    <a href="cart.html" class="cart-link">
    ğŸ›’ ã‚«ãƒ¼ãƒˆ <span id="cart-count">0</span>
    </a> 

    <section class="rank-list"> 
     <div class="rank-card"> 
        <div class="rank-badge">1ä½</div> 
        <img src="code/fashion_jeans.png" alt="ã‚¸ãƒ¼ãƒ³ã‚º" />
        <h2>ã‚¹ãƒˆãƒ¬ãƒ¼ãƒˆãƒ‡ãƒ‹ãƒ </h2> 
        <p class="price">Â¥5,500</p> 
        <button onclick="addToCart({ id: 2, name: 'ã‚¹ãƒˆãƒ¬ãƒ¼ãƒˆãƒ‡ãƒ‹ãƒ ', price: 5500, quantity: 1 })">ã‚«ãƒ¼ãƒˆã«è¿½åŠ </button>
      </div>

     <div class="rank-card">
        <div class="rank-badge">2ä½</div>
        <img src="code/shoes_sneaker.png" alt="ã‚¹ãƒ‹ãƒ¼ã‚«ãƒ¼" />
        <h2>ã‚¹ãƒ‹ãƒ¼ã‚«ãƒ¼</h2>
        <p class="price">Â¥6,500</p>
        <button onclick="addToCart('ã‚¹ãƒ‹ãƒ¼ã‚«ãƒ¼', 6500)">ã‚«ãƒ¼ãƒˆã«è¿½åŠ </button>
      </div>
    
     <div class="rank-card">
        <div class="rank-badge">3ä½</div>
        <img src="code/fashion_tshirt1_white.png" alt="ãƒ›ãƒ¯ã‚¤ãƒˆTã‚·ãƒ£ãƒ„" />
        <h2>ãƒ›ãƒ¯ã‚¤ãƒˆTã‚·ãƒ£ãƒ„</h2>
        <p class="price">Â¥2,000</p>
        <button onclick="addToCart({ id: 1, name: 'ãƒ›ãƒ¯ã‚¤ãƒˆTã‚·ãƒ£ãƒ„', price: 2000, quantity: 1 })">ã‚«ãƒ¼ãƒˆã«è¿½åŠ </button>

      </div>
    </section>

   <a href="javascript:history.back()" style="
  display: inline-block;
  margin: 20px;
  padding: 10px 16px;
  background-color: #f0f0f0;
  color: #333;
  border: 1px solid #ccc;
  border-radius: 6px;
  text-decoration: none;
  font-size: 14px;
  cursor: pointer;
">â† å‰ã®ãƒšãƒ¼ã‚¸ã«æˆ»ã‚‹</a>
   
    <a href="cart.html" class="back-link">ğŸ›’ ã‚«ãƒ¼ãƒˆã‚’è¦‹ã‚‹</a>

  
</main>

<script>
  function addToCart(newItem) {
    const cart = JSON.parse(localStorage.getItem("cart") || "[]");

    const existing = cart.find(item => item.id === newItem.id);

    if (existing) {
      existing.quantity += newItem.quantity;
    } else {
      cart.push(newItem);
    }

    localStorage.setItem("cart", JSON.stringify(cart));
    alert(`${newItem.name} ã‚’ã‚«ãƒ¼ãƒˆã«è¿½åŠ ã—ã¾ã—ãŸï¼`);
    updateCartCount();
  }
</script>

<script>
    window.onload = function() {
      const apiURL = "https://script.google.com/macros/s/AKfycbygshnWLwiuhY6ScjxU_IdS0K7l-5OGQ5kWsY_eYsyLRaXyUCimmA79S2ykwXsrdR-f/exec";
      const pageName = "rank.html";
  
      fetch(`${apiURL}?page=${encodeURIComponent(pageName)}`)
        .then(response => response.text())
        .then(data => console.log("è¨˜éŒ²æˆåŠŸ:", data))
        .catch(err => console.error("ã‚¨ãƒ©ãƒ¼:", err));
    };
  </script>

 <script>
  function updateCartCount() {
    const cart = JSON.parse(localStorage.getItem("cart") || "[]");
    const totalCount = cart.reduce((sum, item) => sum + item.quantity, 0);

    const cartCountElem = document.getElementById("cart-count");
    if (cartCountElem) {
      cartCountElem.textContent = totalCount;
    }
  }

  window.addEventListener("storage", (event) => {
    if (event.key === "cart") {
      updateCartCount();
    }
  });

  window.addEventListener("DOMContentLoaded", updateCartCount);
</script>


<script src="track.js"></script>

</body>
</html>
