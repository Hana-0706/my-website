<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>ãŠã™ã™ã‚ã‚³ãƒ¼ãƒ‡ã‚£ãƒãƒ¼ãƒˆ</title>
  <link rel="stylesheet" href="recommend.css">
</head>
<body>
  <main class="recommend-page">
    <h1>ãŠã™ã™ã‚ã‚³ãƒ¼ãƒ‡ã‚£ãƒãƒ¼ãƒˆ</h1>
    <section class="recommend-list">
      <div class="recommend-card">
        <img src="cloth_skirt.png" alt="ã‚¹ã‚«ãƒ¼ãƒˆ">
        <h2>ãƒ•ãƒ¬ã‚¢ã‚¹ã‚«ãƒ¼ãƒˆ</h2>
        <p class="price">Â¥3,500</p>
        <button onclick="addToCart('ãƒ•ãƒ¬ã‚¢ã‚¹ã‚«ãƒ¼ãƒˆ', 3500)">ã‚«ãƒ¼ãƒˆã«è¿½åŠ </button>
      </div>
      <div class="recommend-card">
        <img src="fashion_jeans.png" alt="ã‚¸ãƒ¼ãƒ³ã‚º">
        <h2>ã‚¹ãƒˆãƒ¬ãƒ¼ãƒˆãƒ‡ãƒ‹ãƒ </h2>
        <p class="price">Â¥5,500</p>
        <button onclick="addToCart('ã‚¹ãƒˆãƒ¬ãƒ¼ãƒˆãƒ‡ãƒ‹ãƒ ', 5500)">ã‚«ãƒ¼ãƒˆã«è¿½åŠ </button>
      </div>
    </section>
    <a href="cart.html" class="back-link">ğŸ›’ ã‚«ãƒ¼ãƒˆã‚’è¦‹ã‚‹</a>
  </main>

  <script>
    function addToCart(name, price) {
      let cart = JSON.parse(localStorage.getItem("cart") || "[]");

      const existing = cart.find(item => item.name === name);
      if (existing) {
        existing.quantity += 1;
      } else {
        cart.push({ name, price, quantity: 1 });
      }

      localStorage.setItem("cart", JSON.stringify(cart));
      alert(`${name} ã‚’ã‚«ãƒ¼ãƒˆã«è¿½åŠ ã—ã¾ã—ãŸï¼`);
    }

    const pathHistory = JSON.parse(localStorage.getItem("pageHistory") || "[]");
    const currentPage = location.pathname.split("/").pop(); // ä¾‹: "index.html"

    if (pathHistory[pathHistory.length - 1] !== currentPage) {
        pathHistory.push(currentPage);
        localStorage.setItem("pageHistory", JSON.stringify(pathHistory));
    }
  </script>

<script>
    window.onload = function() {
      const apiURL = "https://script.google.com/macros/s/AKfycbygshnWLwiuhY6ScjxU_IdS0K7l-5OGQ5kWsY_eYsyLRaXyUCimmA79S2ykwXsrdR-f/exec";
      const pageName = "recommend.html";
  
      fetch(`${apiURL}?page=${encodeURIComponent(pageName)}`)
        .then(response => response.text())
        .then(data => console.log("è¨˜éŒ²æˆåŠŸ:", data))
        .catch(err => console.error("ã‚¨ãƒ©ãƒ¼:", err));
    };
  </script>
  
</body>
</html>
